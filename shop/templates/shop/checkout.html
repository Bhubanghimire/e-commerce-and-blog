{% extends 'shop/base.html' %}

{% block title %} checkout{% endblock%}

{% block css %}

    body {font-family: Arial, Helvetica, sans-serif;}
    * {box-sizing: border-box;}
    
    input[type=text], select, textarea {
      width: 100%;
      padding: 12px;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
      margin-top: 6px;
      margin-bottom: 16px;
      resize: vertical;
    }
    
    input[type=submit] {
      background-color: #4CAF50;
      color: white;
      padding: 12px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    
    input[type=submit]:hover {
      background-color: #45a049;
    }
    
    .container {
      border-radius: 5px;
      background-color: #f2f2f2;
      padding: 20px;
    }
    
{% endblock %}

{% block body %}
    <div class="container">
        <div class="col my-2">
        <h2>step1:Review your card item</h2>
        <div >
        <ol id="items"class="list-group my-2 list-group-numbered">
          
          </ol>
        </div>
    </div>

    <div class="col my-5">
        <h2>step 2:Enter address and other details:</h2>
        <form method="post" action="/shop/checkout/" >
            {% csrf_token %}

            <input type="hidden" name="itemjson" id="itemjson">
            <label for="name"> Name</label>
            <input type="text" id="name" name="name" placeholder="Your name.">
        
            <label for="email">Email</label>
            <input type="text" id="email" name="email" placeholder="Enter your email.">
        
            <label for="phone">Phone</label>
            <input type="text" id="phone" name="phone" placeholder="Enter your phone.">
        
            <label for="district">District</label>
            <input type="text" id="district" name="district" placeholder="Enter your phone.">

            <label for="address">Address</label>
            <input type="text" id="address" name="address" placeholder="Enter your phone.">

            <button type="submit"  class="btn btn-success">Place order</button>
          </form>

    </div>
</div>


{% endblock %}

{%block js%}
<script>
if (localStorage.getItem('cart') == null) {
    var cart = {};
} else {
    cart = JSON.parse(localStorage.getItem('cart'));
}
console.log(cart);
var sum = 0;
if ($.isEmptyObject(cart)) {
    // If object is empty
    mystr = "<p>Your cart is empty, please add some items before checking out ! </p>"
    $('#items').append(mystr);
}

for (item in cart) {

    let name = cart[item][1];
    let qty = cart[item][0];
    sum = sum + qty;
    mystr = `        <li class="list-group-item d-flex justify-content-between align-items-center">
                   ${name}
                    <span class="badge badge-primary badge-pill">${qty}</span>
                </li>`
    $('#items').append(mystr);
}
document.getElementById('cart').innerHTML = sum;
</script>
{%endblock%}